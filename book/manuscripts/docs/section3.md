---
class: content
---

<div class="doc-header">
  <div class="doc-title">VPCで利用するアドレス範囲は慎重に</div>
  <div class="doc-author">モブエンジニア</div>
</div>

# 本セクションでお伝えしたいこと

大きく次の3点があります

1. 利用用途に応じてアドレス範囲を決めておく
2. プライベートアドレスはバッティングリスクがある
3. 他社ネットワークを利用する場合事前協議を行っておく

## はじめに

ネットワーク設計を行う中でVPCで利用するアドレス範囲を決める必要があります。アドレス範囲を決めるうえで**どのような基準で決める必要があるか**悩むと思います。VPCで利用するIPアドレス範囲の決め方について簡単にまとめておきたいと思います。

## VPCで利用できるアドレス範囲

AWS公式ドキュメントを見るとRFC1918で定義されているIPアドレスを利用するように示されています。
※RFC1918で定義されているIPアドレス以外も利用可能だが正常に動かないリスクがあるため非推奨。
※RFC6598で定義されているシェアードアドレス（100.64.0.0/10）も利用可能

**RFC1918 IPアドレス（プライベートアドレス）**
- 10.0.0.0/8（10.0.0.0～10.255.255.255）
- 172.16.0.0/12（172.16.0.0～172.31.255.255）
- 192.168.0.0/16（192.168.0.0～192.168.255.255）

## より良い設計を行うために

IPアドレス設計を行ううえで「バッティングしないようにする」ことが前提としてあります。
そのため、バッティングしないようにするために以下ポイントを留意してみるといいかもしれません。

- 構築するサービスの想定利用ユーザを把握する（利用ユーザが必要IPアドレス数になる）
- CIDR範囲はなるべく狭く設定しておく（広く設定するとバッティングリスクがある）
- シェアードアドレスを積極的に利用する（プライベートアドレスは多く利用される）
- 接続する可能性がある事業者・関係者とIPアドレスに関するルール決めを行っておく

## まとめ

VPCで利用するIPアドレス範囲を決める際は、**バッティングしないようにすること**が重要です。バッティングしないようにするために、**利用用途に応じてアドレス範囲を決めること**、**プライベートアドレスはバッティングリスクがあることを理解すること**、**他社ネットワークを利用する場合事前協議を行っておくこと**を意識してみてください。
